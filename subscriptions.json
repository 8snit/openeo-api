{
  "asyncapi": "1.0.0",
  "info": {
    "title": "openEO API for Subscriptions",
    "version": "0.3.0",
    "description": "The openEO API specification for interoperable cloud-based processing of large Earth observation datasets.\n\nThis is a subset of the openEO API, which handles WebSocket-based protocols for subscriptions and notifications.\n",
    "contact": {
      "name": "openEO Consortium",
      "url": "http://www.openeo.org",
      "email": "openeo@list.tuwien.ac.at"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "externalDocs": {
    "description": "openEO Documentation",
    "url": "https://open-eo.github.io/openeo-api/v/0.3.0/"
  },
  "baseTopic": "org.openeo",
  "topics": {
    "jobs": {
      "subscribe": {
        "$ref": "#/components/messages/subscribe"
      }
    },
    "jobs.output": {
      "publish": {
        "$ref": "#/components/messages/output"
      }
    },
    "jobs.debug": {
      "publish": {
        "$ref": "#/components/messages/debug"
      }
    },
    "jobs.status": {
      "publish": {
        "$ref": "#/components/messages/status"
      }
    }
  },
  "components": {
    "messages": {
      "subscribe": {
        "summary": "Subscribes to certain topics.",
        "payload": {
          "type": "object",
          "required": [
            "topics"
          ],
          "properties": {
            "topics": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "org.openeo.jobs.output",
                  "org.openeo.jobs.debug",
                  "org.openeo.jobs.status"
                ]
              },
              "example": [
                "org.openeo.jobs.output",
                "org.openeo.jobs.status"
              ]
            }
          }
        }
      },
      "output": {
        "summary": "Data written to the output console via processes.",
        "payload": {
          "type": "object",
          "required": [
            "job_id",
            "issued",
            "type",
            "output"
          ],
          "properties": {
            "job_id": {
              "$ref": "#/components/schemas/job_id"
            },
            "issued": {
              "$ref": "#/components/schemas/issued"
            },
            "type": {
              "$ref": "#/components/schemas/type"
            },
            "output": {
              "$ref": "#/components/schemas/output"
            }
          }
        }
      },
      "debug": {
        "summary": "Debugging information.",
        "payload": {
          "type": "object",
          "required": [
            "job_id",
            "issued",
            "type",
            "debug"
          ],
          "properties": {
            "job_id": {
              "$ref": "#/components/schemas/job_id"
            },
            "issued": {
              "$ref": "#/components/schemas/issued"
            },
            "type": {
              "$ref": "#/components/schemas/type"
            },
            "debug": {
              "$ref": "#/components/schemas/debug"
            }
          }
        }
      },
      "status": {
        "summary": "Inform about a status change.",
        "payload": {
          "type": "object",
          "required": [
            "job_id",
            "issued",
            "type",
            "status"
          ],
          "properties": {
            "job_id": {
              "$ref": "#/components/schemas/job_id"
            },
            "issued": {
              "$ref": "#/components/schemas/issued"
            },
            "type": {
              "$ref": "#/components/schemas/type"
            },
            "status": {
              "$ref": "#/components/schemas/status"
            },
            "progress": {
              "$ref": "#/components/schemas/progress"
            }
          }
        }
      }
    },
    "schemas": {
      "job_id": {
        "type": "string",
        "description": "Unique identifier of a job that is generated by the back-end during job submission.",
        "example": "a3cca2b2aa1e3b5b"
      },
      "issued": {
        "type": "string",
        "format": "date-time",
        "description": "Date and time when the message was sent."
      },
      "type": {
        "type": "string",
        "description": "Message type",
        "enum": [
          "org.openeo.jobs.output",
          "org.openeo.jobs.debug",
          "org.openeo.jobs.status"
        ]
      },
      "progress": {
        "type": "number",
        "description": "Progress of a running job in percent.",
        "example": 75.5
      },
      "status": {
        "type": "string",
        "description": "Current status",
        "example": "running",
        "enum": [
          "submitted",
          "queued",
          "running",
          "canceled",
          "finished",
          "error"
        ]
      },
      "debug": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string",
            "description": "Debug message",
            "example": "Invalid SRS specified, defaulting to EPSG:4326."
          },
          "process": {
            "type": "object",
            "description": "Process throwing the debugging message.",
            "required": [
              "name",
              "parameters"
            ],
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the process.",
                "example": "filter_bbox"
              },
              "parameters": {
                "type": "object",
                "description": "Key-Value-Pairs for the parameters of the process. The keys are the parameter names and the values are the actual values specified for the parameter.",
                "additionalProperties": true,
                "example": {
                  "srs": "EPSG:9999",
                  "left": 55,
                  "right": 56,
                  "top": 11,
                  "bottom": 10
                }
              }
            }
          }
        }
      },
      "output": {
        "type": "object",
        "description": "Output data",
        "additionalProperties": true
      }
    }
  }
}